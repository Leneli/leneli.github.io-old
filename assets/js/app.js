"use strict";

(function () {
	//for SVG-elements in IE
	svg4everybody();
})();

//запустить какую-либо функцию, если element существует на странице
var forElement = function forElement(element) {
	return new Promise(function (resolve) {
		if (element) {
			resolve();
		}
	});
};

//Flip effect
(function () {
	document.addEventListener("DOMContentLoaded", function () {

		var authorize = document.getElementById("authorize"),
		    flipClass = "flipper";

		//login form
		if (authorize) {
			authorize.addEventListener("click", runFlip);

			//перевернуть карту при клике вне ее
			document.body.addEventListener("click", function (e) {
				if (!e) e = window.event;
				var elems = e.path,
				    flag = true;

				for (var i = 0; i < elems.length; i++) {
					if (elems[i].id === "authorize" || elems[i].id === "login") {
						flag = false;
					}
				}

				if (flag) document.getElementById("login").classList.remove(flipClass);
			});
		}

		//flip effect
		function runFlip() {
			var elem = document.getElementById(this.dataset.flipId),
			    classes = elem.classList;

			classes.contains(flipClass) === true ? classes.remove(flipClass) : classes.add(flipClass);
		}
	});
})();

//Parallax
(function () {
	document.addEventListener("DOMContentLoaded", function () {
		var layers = document.getElementsByClassName("parallax__layer"),
		    parallax = void 0;

		var moveLaers = function moveLaers(e) {
			e = e || event;

			var initialX = window.innerWidth / 2 - e.pageX,
			    initialY = window.innerHeight / 2 - e.pageY;

			for (var i = 0; i < layers.length; i++) {
				var divider = void 0;

				if (layers.length >= 5) divider = i / 100;else divider = (i + 1) / 100;

				var X = initialX * divider,
				    Y = initialY * divider,
				    transformStyle = "translate3d(" + X + "px, " + Y + "px, " + "0)";

				layers[i].style.transform = transformStyle;
			}
		};

		window.addEventListener("mousemove", moveLaers);
	});
})();

//Main menu
//jQuery
$(function () {
	$('#toggle').on('click', function () {
		$(this).toggleClass('hamburger_on');
		$('#main-menu').toggleClass('main-menu_target');
	});
});

//Preloader
//jQuery
var preloader = function () {
	var percents = 0,
	    preloader = $("#preloader");

	var imgPath = $("*").map(function (i, el) {
		var bg = $(el).css("background-image"),
		    img = $(el).is("img"),
		    path = "";

		if (bg != "none") {
			path = bg.replace('url("', '').replace('")', '');;
		}

		if (img) {
			path = $(el).attr("src");
		}

		if (path) return path;
	});

	var setPercents = function setPercents(total, current) {
		var persents = Math.ceil(current / total * 100);

		$("#percrnts").text(persents);

		if (persents >= 100) {
			preloader.fadeOut();
		}
	};

	var loadImages = function loadImages(images) {

		if (!images.length) preloader.fadeOut();

		images.forEach(function (img, i, images) {
			var fakeImage = $("<img>", {
				attr: {
					src: img
				}
			});

			fakeImage.on("load error", function () {
				percents++;
				setPercents(images.length, percents);
			});
		});
	};

	return {
		init: function init() {
			var imgs = imgPath.toArray();

			loadImages(imgs);
		}
	};
}();

$(function () {
	preloader.init();
});

//Sidebar
//jQuery
var blog = document.getElementById("blog");

//если элемент blog существует
forElement(blog).then(function () {
	//модуль Sidebar
	var scrollSidebar = function () {
		var sidebar = $(".sidebar"),
		    menu = $(".sidebar-nav"),
		    link = $(".sidebar__link"),
		    article = $(".article"),
		    body = document.body,
		    isPositionArticle = [],
		    offsetHeight = $(".blog__content")[0].offsetTop - $(".main")[0].offsetTop;

		var positionArticle = function positionArticle(el) {
			for (var i = 0; i < el.length; i++) {
				isPositionArticle[i] = {};
				isPositionArticle[i].top = el.eq(i).offset().top - offsetHeight;
				isPositionArticle[i].bottom = isPositionArticle[i].top + el.eq(i).innerHeight();
			}
		};

		var menuFixed = function menuFixed() {
			var scroll = window.pageYOffset;

			if (scroll < article.offset().top) {
				sidebar.removeClass("fixed");
				$(".blog__content").removeClass("nav-fixed");
			} else {
				sidebar.addClass("fixed");
				$(".blog__content").addClass("nav-fixed");
			}
		};

		var scrollPage = function scrollPage(e) {
			var scroll = window.pageYOffset;

			for (var i = 0; i < isPositionArticle.length; i++) {
				if (scroll >= isPositionArticle[i].top && scroll <= isPositionArticle[i].bottom) {
					link.eq(i).addClass("sidebar__link_active").siblings().removeClass("sidebar__link_active");
				}
			}
		};

		var clickOnMenu = function clickOnMenu(e) {
			var index = $(e.target).index();
			var sectionOffset = article.eq(index).offset().top;
			$(document).off("scroll", scrollPage);
			$("body, html").animate({
				"scrollTop": sectionOffset
			}, function () {
				$(e.target).addClass("sidebar__link_active").siblings().removeClass("sidebar__link_active");
				$(document).on("scroll", scrollPage);
			});
		};

		var addListener = function addListener() {
			$(menu).on("click", clickOnMenu);

			$(document).on("scroll", scrollPage);
			$(document).on("scroll", menuFixed);

			$(window).on("load", function (e) {
				positionArticle(article);
			});

			$(window).on("resize", function (e) {
				positionArticle(article);
			});
		};

		return {
			init: addListener
		};
	}();

	scrollSidebar.init();

	//toggle class 
	$("#btn").on("click", function () {
		$("#blog").toggleClass("on");
	});
});

//Slider
var slider = document.getElementById("slider");

forElement(slider).then(function () {
	window.onload = function () {
		Slider.init();
	};

	var Slider = {
		init: function init() {
			this.display = document.getElementById("display");
			this.header = document.getElementById("header");
			this.description = document.getElementById("description");
			this.siteLink = document.getElementById("siteLink");
			this.btnPrew = document.getElementById("btnPrew");
			this.btnNext = document.getElementById("btnNext");
			this.btnPrewImg = document.getElementById("btnPrewImg");
			this.btnNextImg = document.getElementById("btnNextImg");

			this.works = [];

			this.duration = 1000;

			this.display.addEventListener("click", function () {
				Slider.animate({
					duration: 3000,
					timing: function timing(timeFraction) {
						return timeFraction;
					},
					draw: function draw(progress) {
						console.log(progress);
						Slider.display.style.opacity = progress;
					}
				});
			});

			//Ajax
			this.data("/assets/json/slider.json").then(function (dataArray) {
				for (var i = 0; i < dataArray.length; i++) {
					Slider.works.push(dataArray[i]);
					Slider.works[i].index = i;
				}
				//заполнить слайдер первоначальными данными
				Slider.clicking(0, dataArray.length - 1, 1);
			}).catch(function (status) {
				console.error("Код ответа: ", status);
			});

			//Events
			this.btnPrew.addEventListener("click", function (event) {
				var indexes = [Slider.display.dataset.index, Slider.btnPrewImg.dataset.index, Slider.btnNextImg.dataset.index];

				Slider.toggleIndexes(indexes, "minus");
				Slider.addAnimate(indexes[0], indexes[1], indexes[2]);
			});

			this.btnNext.addEventListener("click", function () {
				var indexes = [Slider.display.dataset.index, Slider.btnPrewImg.dataset.index, Slider.btnNextImg.dataset.index];

				Slider.toggleIndexes(indexes, "plus");
				Slider.addAnimate(indexes[0], indexes[1], indexes[2]);
			});
		},
		data: function data(url) {
			return new Promise(function (resolve, reject) {
				var xhr = new XMLHttpRequest();
				xhr.open("GET", url, true);
				xhr.responseType = "json";
				xhr.send();
				xhr.onreadystatechange = function () {
					if (xhr.readyState !== 4) return;
					if (xhr.status !== 200) {
						reject(xhr.status);
					} else {
						resolve(xhr.response);
					}
				};
			});
		},
		addTextBlock: function addTextBlock(index) {
			this.header.innerText = this.works[index].title;
			this.description.innerText = this.works[index].desc;
			this.siteLink.href = this.works[index].link;
		},
		addDisplay: function addDisplay(index) {
			this.display.src = this.works[index].image;
			this.display.alt = this.works[index].title;
			this.display.dataset.index = index;
		},
		addNextImg: function addNextImg(index) {
			this.btnNextImg.src = this.works[index].preview;
			this.btnNextImg.alt = this.works[index].title;
			this.btnNextImg.dataset.index = index;
		},
		addPrewImg: function addPrewImg(index) {
			this.btnPrewImg.src = this.works[index].preview;
			this.btnPrewImg.alt = this.works[index].title;
			this.btnPrewImg.dataset.index = index;
		},
		clicking: function clicking(displayIndex, prewIndex, nextIndex) {
			//main content in the slider: big picture, title, description and link
			this.addDisplay(displayIndex);
			this.addTextBlock(displayIndex);
			//small image on the button "previous work"
			this.addPrewImg(prewIndex);
			//small image on the button "next work"
			this.addNextImg(nextIndex);
		},
		toggleIndexes: function toggleIndexes(arr, type) {
			var max = this.works.length - 1;

			for (var i = 0; i < arr.length; i++) {
				switch (type) {
					case "plus":
						if (arr[i] == max) arr[i] = 0;else arr[i]++;
						break;
					case "minus":
						if (arr[i] == 0) arr[i] = max;else arr[i]--;
						break;
				}
			}
		},
		animate: function animate(options) {
			var start = performance.now();

			requestAnimationFrame(function animate(time) {
				// timeFraction от 0 до 1
				var timeFraction = (time - start) / options.duration;
				if (timeFraction > 1) timeFraction = 1;

				// текущее состояние анимации
				var progress = timeFraction;
				//функция, описывающая анимацию
				options.draw(progress);

				if (timeFraction < 1) {
					requestAnimationFrame(animate);
				}
			});
		},
		addAnimate: function addAnimate(i, j, k) {
			//анимация до переключения слайда
			Slider.animate({
				duration: Slider.duration,
				draw: function draw(progress) {
					Slider.btnPrewImg.style.marginTop = progress * 600 + "px";
					Slider.btnNextImg.style.marginTop = progress * -600 + "px";
					Slider.display.style.opacity = 1 - progress;
				}
			});

			setTimeout(function () {
				Slider.clicking(i, j, k);

				Slider.btnPrewImg.style.marginTop = 0 + "px";
				Slider.btnPrewImg.style.height = 0 + "%";
				Slider.btnNextImg.style.marginTop = 0 + "px";
				Slider.btnNextImg.style.height = 0 + "%";

				//анимация после переключения слайда
				Slider.animate({
					duration: Slider.duration,
					draw: function draw(progress) {
						Slider.btnPrewImg.style.height = progress * 100 + "%";
						Slider.btnNextImg.style.height = progress * 100 + "%";
						Slider.display.style.opacity = progress;
					}
				});
			}, Slider.duration + 100);
		}
	};
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImZsaXAuanMiLCJwYXJhbGxheC5qcyIsIm1haW5tZW51LmpzIiwicHJlbG9hZGVyLmpzIiwic2lkZWJhci5qcyIsInNsaWRlci5qcyJdLCJuYW1lcyI6WyJzdmc0ZXZlcnlib2R5IiwiZm9yRWxlbWVudCIsImVsZW1lbnQiLCJQcm9taXNlIiwicmVzb2x2ZSIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImF1dGhvcml6ZSIsImdldEVsZW1lbnRCeUlkIiwiZmxpcENsYXNzIiwicnVuRmxpcCIsImJvZHkiLCJlIiwid2luZG93IiwiZXZlbnQiLCJlbGVtcyIsInBhdGgiLCJmbGFnIiwiaSIsImxlbmd0aCIsImlkIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiZWxlbSIsImRhdGFzZXQiLCJmbGlwSWQiLCJjbGFzc2VzIiwiY29udGFpbnMiLCJhZGQiLCJsYXllcnMiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwicGFyYWxsYXgiLCJtb3ZlTGFlcnMiLCJpbml0aWFsWCIsImlubmVyV2lkdGgiLCJwYWdlWCIsImluaXRpYWxZIiwiaW5uZXJIZWlnaHQiLCJwYWdlWSIsImRpdmlkZXIiLCJYIiwiWSIsInRyYW5zZm9ybVN0eWxlIiwic3R5bGUiLCJ0cmFuc2Zvcm0iLCIkIiwib24iLCJ0b2dnbGVDbGFzcyIsInByZWxvYWRlciIsInBlcmNlbnRzIiwiaW1nUGF0aCIsIm1hcCIsImVsIiwiYmciLCJjc3MiLCJpbWciLCJpcyIsInJlcGxhY2UiLCJhdHRyIiwic2V0UGVyY2VudHMiLCJ0b3RhbCIsImN1cnJlbnQiLCJwZXJzZW50cyIsIk1hdGgiLCJjZWlsIiwidGV4dCIsImZhZGVPdXQiLCJsb2FkSW1hZ2VzIiwiaW1hZ2VzIiwiZm9yRWFjaCIsImZha2VJbWFnZSIsInNyYyIsImluaXQiLCJpbWdzIiwidG9BcnJheSIsImJsb2ciLCJ0aGVuIiwic2Nyb2xsU2lkZWJhciIsInNpZGViYXIiLCJtZW51IiwibGluayIsImFydGljbGUiLCJpc1Bvc2l0aW9uQXJ0aWNsZSIsIm9mZnNldEhlaWdodCIsIm9mZnNldFRvcCIsInBvc2l0aW9uQXJ0aWNsZSIsInRvcCIsImVxIiwib2Zmc2V0IiwiYm90dG9tIiwibWVudUZpeGVkIiwic2Nyb2xsIiwicGFnZVlPZmZzZXQiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwic2Nyb2xsUGFnZSIsInNpYmxpbmdzIiwiY2xpY2tPbk1lbnUiLCJpbmRleCIsInRhcmdldCIsInNlY3Rpb25PZmZzZXQiLCJvZmYiLCJhbmltYXRlIiwiYWRkTGlzdGVuZXIiLCJzbGlkZXIiLCJvbmxvYWQiLCJTbGlkZXIiLCJkaXNwbGF5IiwiaGVhZGVyIiwiZGVzY3JpcHRpb24iLCJzaXRlTGluayIsImJ0blByZXciLCJidG5OZXh0IiwiYnRuUHJld0ltZyIsImJ0bk5leHRJbWciLCJ3b3JrcyIsImR1cmF0aW9uIiwidGltaW5nIiwidGltZUZyYWN0aW9uIiwiZHJhdyIsInByb2dyZXNzIiwiY29uc29sZSIsImxvZyIsIm9wYWNpdHkiLCJkYXRhIiwiZGF0YUFycmF5IiwicHVzaCIsImNsaWNraW5nIiwiY2F0Y2giLCJzdGF0dXMiLCJlcnJvciIsImluZGV4ZXMiLCJ0b2dnbGVJbmRleGVzIiwiYWRkQW5pbWF0ZSIsInVybCIsInJlamVjdCIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInJlc3BvbnNlVHlwZSIsInNlbmQiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwicmVzcG9uc2UiLCJhZGRUZXh0QmxvY2siLCJpbm5lclRleHQiLCJ0aXRsZSIsImRlc2MiLCJocmVmIiwiYWRkRGlzcGxheSIsImltYWdlIiwiYWx0IiwiYWRkTmV4dEltZyIsInByZXZpZXciLCJhZGRQcmV3SW1nIiwiZGlzcGxheUluZGV4IiwicHJld0luZGV4IiwibmV4dEluZGV4IiwiYXJyIiwidHlwZSIsIm1heCIsIm9wdGlvbnMiLCJzdGFydCIsInBlcmZvcm1hbmNlIiwibm93IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1l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QUEsQ0FBQXRFLEtBQUEsQ0FBQWdJLE1BQUEsR0FBQW5ELFdBQUEsR0FBQSxHQUFBLEdBQUE7QUFDQWQsYUFBQVEsVUFBQSxDQUFBdkUsS0FBQSxDQUFBZ0ksTUFBQSxHQUFBbkQsV0FBQSxHQUFBLEdBQUEsR0FBQTtBQUNBZCxhQUFBQyxPQUFBLENBQUFoRSxLQUFBLENBQUFnRixPQUFBLEdBQUFILFFBQUE7QUFDQTtBQU5BLEtBQUE7QUFRQSxJQWpCQSxFQWlCQWQsT0FBQVUsUUFBQSxHQUFBLEdBakJBO0FBa0JBO0FBckxBLEVBQUE7QUF1TEEsQ0E1TEEiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4oZnVuY3Rpb24oKSB7XHJcblx0Ly9mb3IgU1ZHLWVsZW1lbnRzIGluIElFXHJcblx0c3ZnNGV2ZXJ5Ym9keSgpOyBcclxufSkoKTtcclxuXHJcbi8v0LfQsNC/0YPRgdGC0LjRgtGMINC60LDQutGD0Y4t0LvQuNCx0L4g0YTRg9C90LrRhtC40Y4sINC10YHQu9C4IGVsZW1lbnQg0YHRg9GJ0LXRgdGC0LLRg9C10YIg0L3QsCDRgdGC0YDQsNC90LjRhtC1XHJcbmxldCBmb3JFbGVtZW50ID0gZnVuY3Rpb24oZWxlbWVudCkge1xyXG5cdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7XHJcblx0XHRpZihlbGVtZW50KSB7XHJcblx0XHRcdHJlc29sdmUoKTtcclxuXHRcdH1cclxuXHR9KTtcclxufTtcclxuIiwiLy9GbGlwIGVmZmVjdFxyXG4oZnVuY3Rpb24oKSB7XHJcblx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgXHRsZXQgYXV0aG9yaXplID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhdXRob3JpemVcIiksXHJcblx0XHRcdGZsaXBDbGFzcyA9IFwiZmxpcHBlclwiO1xyXG5cclxuXHRcdC8vbG9naW4gZm9ybVxyXG5cdFx0aWYoYXV0aG9yaXplKSB7XHJcblx0XHRcdGF1dGhvcml6ZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcnVuRmxpcCk7XHJcblxyXG5cdFx0XHQvL9C/0LXRgNC10LLQtdGA0L3Rg9GC0Ywg0LrQsNGA0YLRgyDQv9GA0Lgg0LrQu9C40LrQtSDQstC90LUg0LXQtVxyXG5cdFx0XHRkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0aWYoIWUpIGUgPSB3aW5kb3cuZXZlbnQ7XHJcblx0XHRcdFx0bGV0IGVsZW1zID0gZS5wYXRoLFxyXG5cdFx0XHRcdFx0ZmxhZyA9IHRydWU7XHJcblxyXG5cdFx0XHRcdGZvcihsZXQgaSA9IDA7IGkgPCBlbGVtcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdFx0aWYoZWxlbXNbaV0uaWQgPT09IFwiYXV0aG9yaXplXCIgfHwgZWxlbXNbaV0uaWQgPT09IFwibG9naW5cIikge1xyXG5cdFx0XHRcdFx0XHRmbGFnID0gZmFsc2U7XHRcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmKGZsYWcpIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9naW5cIikuY2xhc3NMaXN0LnJlbW92ZShmbGlwQ2xhc3MpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHRcdFxyXG5cclxuXHRcdC8vZmxpcCBlZmZlY3RcclxuXHRcdGZ1bmN0aW9uIHJ1bkZsaXAoKSB7XHJcblx0XHRcdGxldCBlbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5kYXRhc2V0LmZsaXBJZCksXHJcblx0XHRcdFx0Y2xhc3NlcyA9IGVsZW0uY2xhc3NMaXN0O1xyXG5cclxuXHRcdFx0Y2xhc3Nlcy5jb250YWlucyhmbGlwQ2xhc3MpID09PSB0cnVlID8gY2xhc3Nlcy5yZW1vdmUoZmxpcENsYXNzKSA6IGNsYXNzZXMuYWRkKGZsaXBDbGFzcyk7XHJcblx0XHR9XHJcblx0fSk7XHJcbn0pKCk7XHJcbiIsIi8vUGFyYWxsYXhcclxuKGZ1bmN0aW9uKCkge1xyXG5cdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRsZXQgbGF5ZXJzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInBhcmFsbGF4X19sYXllclwiKSxcclxuXHRwYXJhbGxheDtcclxuXHJcblx0bGV0IG1vdmVMYWVycyA9IGZ1bmN0aW9uKGUpIHtcclxuXHRcdGUgPSBlIHx8IGV2ZW50O1xyXG5cclxuXHRcdGxldCBpbml0aWFsWCA9ICh3aW5kb3cuaW5uZXJXaWR0aCAvIDIpIC0gZS5wYWdlWCxcclxuXHRcdFx0aW5pdGlhbFkgPSAod2luZG93LmlubmVySGVpZ2h0IC8gMikgLSBlLnBhZ2VZO1xyXG5cclxuXHRcdGZvcihsZXQgaSA9IDA7IGkgPCBsYXllcnMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0bGV0IGRpdmlkZXI7XHJcblxyXG5cdFx0XHRpZihsYXllcnMubGVuZ3RoID49IDUpIGRpdmlkZXIgPSBpIC8gMTAwO1xyXG5cdFx0XHRlbHNlIGRpdmlkZXIgPSAoaSArIDEpIC8gMTAwO1xyXG5cclxuXHRcdFx0bGV0IFggPSBpbml0aWFsWCAqIGRpdmlkZXIsXHJcblx0XHRcdFx0WSA9IGluaXRpYWxZICogZGl2aWRlcixcclxuXHRcdFx0XHR0cmFuc2Zvcm1TdHlsZSA9IFwidHJhbnNsYXRlM2QoXCIgKyBYICsgXCJweCwgXCIgKyBZICsgXCJweCwgXCIgKyBcIjApXCI7XHJcblxyXG5cdFx0XHRsYXllcnNbaV0uc3R5bGUudHJhbnNmb3JtID0gdHJhbnNmb3JtU3R5bGU7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgbW92ZUxhZXJzKTtcclxuXHR9KTtcclxufSkoKTtcclxuXHJcbiIsIi8vTWFpbiBtZW51XHJcbi8valF1ZXJ5XHJcbiQoZnVuY3Rpb24oKSB7XHJcblx0JCgnI3RvZ2dsZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuXHRcdCQodGhpcykudG9nZ2xlQ2xhc3MoJ2hhbWJ1cmdlcl9vbicpO1xyXG5cdFx0JCgnI21haW4tbWVudScpLnRvZ2dsZUNsYXNzKCdtYWluLW1lbnVfdGFyZ2V0Jyk7XHJcblx0fSk7XHJcbn0pO1xyXG4iLCIvL1ByZWxvYWRlclxyXG4vL2pRdWVyeVxyXG5sZXQgcHJlbG9hZGVyID0gKGZ1bmN0aW9uICgpIHtcclxuXHRsZXQgcGVyY2VudHMgPSAwLFxyXG5cdFx0cHJlbG9hZGVyID0gJChcIiNwcmVsb2FkZXJcIik7XHJcblxyXG5cdGxldCBpbWdQYXRoID0gJChcIipcIikubWFwKGZ1bmN0aW9uIChpLCBlbCkge1xyXG5cdFx0bGV0IGJnID0gJChlbCkuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiKSxcclxuXHRcdFx0aW1nID0gJChlbCkuaXMoXCJpbWdcIiksXHJcblx0XHRcdHBhdGggPSBcIlwiO1xyXG5cclxuXHRcdGlmIChiZyAhPSBcIm5vbmVcIikge1xyXG5cdFx0XHRwYXRoID0gYmcucmVwbGFjZSgndXJsKFwiJywgJycpLnJlcGxhY2UoJ1wiKScsICcnKTs7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKGltZykge1xyXG5cdFx0XHRwYXRoID0gJChlbCkuYXR0cihcInNyY1wiKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAocGF0aCkgcmV0dXJuIHBhdGg7XHJcblx0fSk7XHJcblxyXG5cdGxldCBzZXRQZXJjZW50cyA9IGZ1bmN0aW9uICh0b3RhbCwgY3VycmVudCkge1xyXG5cdFx0bGV0IHBlcnNlbnRzID0gTWF0aC5jZWlsKGN1cnJlbnQgLyB0b3RhbCAqIDEwMCk7XHJcblxyXG5cdFx0JChcIiNwZXJjcm50c1wiKS50ZXh0KHBlcnNlbnRzKTtcclxuXHJcblx0XHRpZiAocGVyc2VudHMgPj0gMTAwKSB7XHJcblx0XHRcdHByZWxvYWRlci5mYWRlT3V0KCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRsZXQgbG9hZEltYWdlcyA9IGZ1bmN0aW9uIChpbWFnZXMpIHtcclxuXHJcblx0XHRpZiAoIWltYWdlcy5sZW5ndGgpIHByZWxvYWRlci5mYWRlT3V0KCk7XHJcblxyXG5cdFx0aW1hZ2VzLmZvckVhY2goZnVuY3Rpb24gKGltZywgaSwgaW1hZ2VzKSB7XHJcblx0XHRcdGxldCBmYWtlSW1hZ2UgPSAkKFwiPGltZz5cIiwge1xyXG5cdFx0XHRcdGF0dHI6IHtcclxuXHRcdFx0XHRcdHNyYzogaW1nXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdGZha2VJbWFnZS5vbihcImxvYWQgZXJyb3JcIiwgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdHBlcmNlbnRzKys7XHJcblx0XHRcdFx0c2V0UGVyY2VudHMoaW1hZ2VzLmxlbmd0aCwgcGVyY2VudHMpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIHtcclxuXHRcdGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0bGV0IGltZ3MgPSBpbWdQYXRoLnRvQXJyYXkoKTtcclxuXHJcblx0XHRcdGxvYWRJbWFnZXMoaW1ncyk7XHJcblx0XHR9XHJcblx0fVxyXG59KCkpO1xyXG5cclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG5cdHByZWxvYWRlci5pbml0KCk7XHJcbn0pO1xyXG4iLCIvL1NpZGViYXJcclxuLy9qUXVlcnlcclxubGV0IGJsb2cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJsb2dcIik7XHJcblxyXG4vL9C10YHQu9C4INGN0LvQtdC80LXQvdGCIGJsb2cg0YHRg9GJ0LXRgdGC0LLRg9C10YJcclxuZm9yRWxlbWVudChibG9nKS50aGVuKGZ1bmN0aW9uICgpIHtcclxuXHQvL9C80L7QtNGD0LvRjCBTaWRlYmFyXHJcblx0bGV0IHNjcm9sbFNpZGViYXIgPSAoZnVuY3Rpb24gKCkge1xyXG5cdFx0bGV0IHNpZGViYXIgPSAkKFwiLnNpZGViYXJcIiksXHJcblx0XHRcdG1lbnUgPSAkKFwiLnNpZGViYXItbmF2XCIpLFxyXG5cdFx0XHRsaW5rID0gJChcIi5zaWRlYmFyX19saW5rXCIpLFxyXG5cdFx0XHRhcnRpY2xlID0gJChcIi5hcnRpY2xlXCIpLFxyXG5cdFx0XHRib2R5ID0gZG9jdW1lbnQuYm9keSxcclxuXHRcdFx0aXNQb3NpdGlvbkFydGljbGUgPSBbXSxcclxuXHRcdFx0b2Zmc2V0SGVpZ2h0ID0gJChcIi5ibG9nX19jb250ZW50XCIpWzBdLm9mZnNldFRvcCAtICQoXCIubWFpblwiKVswXS5vZmZzZXRUb3A7XHJcblxyXG5cdFx0bGV0IHBvc2l0aW9uQXJ0aWNsZSA9IGZ1bmN0aW9uIChlbCkge1xyXG5cdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGVsLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0aXNQb3NpdGlvbkFydGljbGVbaV0gPSB7fTtcclxuXHRcdFx0XHRpc1Bvc2l0aW9uQXJ0aWNsZVtpXS50b3AgPSBlbFxyXG5cdFx0XHRcdFx0LmVxKGkpXHJcblx0XHRcdFx0XHQub2Zmc2V0KClcclxuXHRcdFx0XHRcdC50b3AgLSBvZmZzZXRIZWlnaHQ7XHJcblx0XHRcdFx0aXNQb3NpdGlvbkFydGljbGVbaV0uYm90dG9tID0gaXNQb3NpdGlvbkFydGljbGVbaV0udG9wICsgZWxcclxuXHRcdFx0XHRcdC5lcShpKVxyXG5cdFx0XHRcdFx0LmlubmVySGVpZ2h0KCk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0bGV0IG1lbnVGaXhlZCA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0bGV0IHNjcm9sbCA9IHdpbmRvdy5wYWdlWU9mZnNldDtcclxuXHJcblx0XHRcdGlmIChzY3JvbGwgPCBhcnRpY2xlLm9mZnNldCgpLnRvcCkge1xyXG5cdFx0XHRcdHNpZGViYXIucmVtb3ZlQ2xhc3MoXCJmaXhlZFwiKTtcclxuXHRcdFx0XHQkKFwiLmJsb2dfX2NvbnRlbnRcIikucmVtb3ZlQ2xhc3MoXCJuYXYtZml4ZWRcIik7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0c2lkZWJhci5hZGRDbGFzcyhcImZpeGVkXCIpO1xyXG5cdFx0XHRcdCQoXCIuYmxvZ19fY29udGVudFwiKS5hZGRDbGFzcyhcIm5hdi1maXhlZFwiKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHJcblx0XHRsZXQgc2Nyb2xsUGFnZSA9IGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdGxldCBzY3JvbGwgPSB3aW5kb3cucGFnZVlPZmZzZXQ7XHJcblxyXG5cdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGlzUG9zaXRpb25BcnRpY2xlLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0aWYgKHNjcm9sbCA+PSBpc1Bvc2l0aW9uQXJ0aWNsZVtpXS50b3AgJiYgc2Nyb2xsIDw9IGlzUG9zaXRpb25BcnRpY2xlW2ldLmJvdHRvbSkge1xyXG5cdFx0XHRcdFx0bGlua1xyXG5cdFx0XHRcdFx0XHQuZXEoaSlcclxuXHRcdFx0XHRcdFx0LmFkZENsYXNzKFwic2lkZWJhcl9fbGlua19hY3RpdmVcIilcclxuXHRcdFx0XHRcdFx0LnNpYmxpbmdzKClcclxuXHRcdFx0XHRcdFx0LnJlbW92ZUNsYXNzKFwic2lkZWJhcl9fbGlua19hY3RpdmVcIik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdGxldCBjbGlja09uTWVudSA9IGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdGxldCBpbmRleCA9ICQoZS50YXJnZXQpLmluZGV4KCk7XHJcblx0XHRcdGxldCBzZWN0aW9uT2Zmc2V0ID0gYXJ0aWNsZVxyXG5cdFx0XHRcdC5lcShpbmRleClcclxuXHRcdFx0XHQub2Zmc2V0KClcclxuXHRcdFx0XHQudG9wO1xyXG5cdFx0XHQkKGRvY3VtZW50KS5vZmYoXCJzY3JvbGxcIiwgc2Nyb2xsUGFnZSk7XHJcblx0XHRcdCQoXCJib2R5LCBodG1sXCIpLmFuaW1hdGUoe1xyXG5cdFx0XHRcdFwic2Nyb2xsVG9wXCI6IHNlY3Rpb25PZmZzZXRcclxuXHRcdFx0fSwgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdCQoZS50YXJnZXQpXHJcblx0XHRcdFx0XHQuYWRkQ2xhc3MoXCJzaWRlYmFyX19saW5rX2FjdGl2ZVwiKVxyXG5cdFx0XHRcdFx0LnNpYmxpbmdzKClcclxuXHRcdFx0XHRcdC5yZW1vdmVDbGFzcyhcInNpZGViYXJfX2xpbmtfYWN0aXZlXCIpO1xyXG5cdFx0XHRcdCQoZG9jdW1lbnQpLm9uKFwic2Nyb2xsXCIsIHNjcm9sbFBhZ2UpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH07XHJcblxyXG5cdFx0bGV0IGFkZExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0XHQkKG1lbnUpLm9uKFwiY2xpY2tcIiwgY2xpY2tPbk1lbnUpO1xyXG5cclxuXHRcdFx0JChkb2N1bWVudCkub24oXCJzY3JvbGxcIiwgc2Nyb2xsUGFnZSk7XHJcblx0XHRcdCQoZG9jdW1lbnQpLm9uKFwic2Nyb2xsXCIsIG1lbnVGaXhlZCk7XHJcblxyXG5cdFx0XHQkKHdpbmRvdykub24oXCJsb2FkXCIsIGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdFx0cG9zaXRpb25BcnRpY2xlKGFydGljbGUpO1xyXG5cdFx0XHR9KVxyXG5cclxuXHRcdFx0JCh3aW5kb3cpLm9uKFwicmVzaXplXCIsIGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdFx0cG9zaXRpb25BcnRpY2xlKGFydGljbGUpO1xyXG5cdFx0XHR9KVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB7XHJcblx0XHRcdGluaXQ6IGFkZExpc3RlbmVyXHJcblx0XHR9XHJcblx0fSkoKTtcclxuXHJcblx0c2Nyb2xsU2lkZWJhci5pbml0KCk7XHJcblxyXG5cdC8vdG9nZ2xlIGNsYXNzIFxyXG5cdCQoXCIjYnRuXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG5cdFx0JChcIiNibG9nXCIpLnRvZ2dsZUNsYXNzKFwib25cIik7XHJcblx0fSk7XHJcbn0pO1x0XHJcbiIsIi8vU2xpZGVyXHJcbmxldCBzbGlkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNsaWRlclwiKTtcclxuXHJcbmZvckVsZW1lbnQoc2xpZGVyKS50aGVuKGZ1bmN0aW9uKCkge1xyXG5cdHdpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuXHRcdFNsaWRlci5pbml0KCk7XHJcblx0fTtcclxuXHJcblx0bGV0IFNsaWRlciA9IHtcclxuXHRcdGluaXQoKSB7XHJcblx0XHRcdHRoaXMuZGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGlzcGxheVwiKTtcclxuXHRcdFx0dGhpcy5oZWFkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImhlYWRlclwiKTtcclxuXHRcdFx0dGhpcy5kZXNjcmlwdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVzY3JpcHRpb25cIik7XHJcblx0XHRcdHRoaXMuc2l0ZUxpbmsgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNpdGVMaW5rXCIpO1xyXG5cdFx0XHR0aGlzLmJ0blByZXcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJ0blByZXdcIik7XHJcblx0XHRcdHRoaXMuYnRuTmV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnRuTmV4dFwiKTtcclxuXHRcdFx0dGhpcy5idG5QcmV3SW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJidG5QcmV3SW1nXCIpO1xyXG5cdFx0XHR0aGlzLmJ0bk5leHRJbWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJ0bk5leHRJbWdcIik7XHJcblx0XHRcdFxyXG5cdFx0XHR0aGlzLndvcmtzID0gW107XHJcblxyXG5cdFx0XHR0aGlzLmR1cmF0aW9uID0gMTAwMDtcclxuXHJcblx0XHRcdHRoaXMuZGlzcGxheS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0U2xpZGVyLmFuaW1hdGUoe1xyXG5cdFx0XHRcdFx0ZHVyYXRpb246IDMwMDAsXHJcblx0XHRcdFx0XHR0aW1pbmc6IGZ1bmN0aW9uKHRpbWVGcmFjdGlvbikgeyByZXR1cm4gdGltZUZyYWN0aW9uOyB9LFxyXG5cdFx0XHRcdFx0ZHJhdzogZnVuY3Rpb24ocHJvZ3Jlc3MpIHtcclxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2cocHJvZ3Jlc3MpO1xyXG5cdFx0XHRcdFx0XHRTbGlkZXIuZGlzcGxheS5zdHlsZS5vcGFjaXR5ID0gcHJvZ3Jlc3M7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Ly9BamF4XHJcblx0XHRcdHRoaXMuZGF0YShcIi9hc3NldHMvanNvbi9zbGlkZXIuanNvblwiKVxyXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKGRhdGFBcnJheSkge1xyXG5cdFx0XHRcdFx0Zm9yKGxldCBpID0gMDsgaSA8IGRhdGFBcnJheS5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdFx0XHRTbGlkZXIud29ya3MucHVzaChkYXRhQXJyYXlbaV0pO1xyXG5cdFx0XHRcdFx0XHRTbGlkZXIud29ya3NbaV0uaW5kZXggPSBpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Ly/Qt9Cw0L/QvtC70L3QuNGC0Ywg0YHQu9Cw0LnQtNC10YAg0L/QtdGA0LLQvtC90LDRh9Cw0LvRjNC90YvQvNC4INC00LDQvdC90YvQvNC4XHJcblx0XHRcdFx0XHRTbGlkZXIuY2xpY2tpbmcoMCwgKGRhdGFBcnJheS5sZW5ndGggLSAxKSwgMSk7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24oc3RhdHVzKSB7XHJcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFwi0JrQvtC0INC+0YLQstC10YLQsDogXCIsIHN0YXR1cyk7XHJcblx0XHRcdFx0fSk7XHJcblxyXG5cclxuXHRcdFx0Ly9FdmVudHNcclxuXHRcdFx0dGhpcy5idG5QcmV3LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihldmVudCkge1xyXG5cdFx0XHRcdGxldCBpbmRleGVzID0gW1xyXG5cdFx0XHRcdFx0XHRTbGlkZXIuZGlzcGxheS5kYXRhc2V0LmluZGV4LCBcclxuXHRcdFx0XHRcdFx0U2xpZGVyLmJ0blByZXdJbWcuZGF0YXNldC5pbmRleCwgXHJcblx0XHRcdFx0XHRcdFNsaWRlci5idG5OZXh0SW1nLmRhdGFzZXQuaW5kZXhcclxuXHRcdFx0XHRcdF07XHJcblxyXG5cdFx0XHRcdFNsaWRlci50b2dnbGVJbmRleGVzKGluZGV4ZXMsIFwibWludXNcIik7XHJcblx0XHRcdFx0U2xpZGVyLmFkZEFuaW1hdGUoaW5kZXhlc1swXSwgaW5kZXhlc1sxXSwgaW5kZXhlc1syXSk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0dGhpcy5idG5OZXh0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRsZXQgaW5kZXhlcyA9IFtcclxuXHRcdFx0XHRcdFx0U2xpZGVyLmRpc3BsYXkuZGF0YXNldC5pbmRleCwgXHJcblx0XHRcdFx0XHRcdFNsaWRlci5idG5QcmV3SW1nLmRhdGFzZXQuaW5kZXgsIFxyXG5cdFx0XHRcdFx0XHRTbGlkZXIuYnRuTmV4dEltZy5kYXRhc2V0LmluZGV4XHJcblx0XHRcdFx0XHRdO1xyXG5cclxuXHRcdFx0XHRTbGlkZXIudG9nZ2xlSW5kZXhlcyhpbmRleGVzLCBcInBsdXNcIik7XHJcblx0XHRcdFx0U2xpZGVyLmFkZEFuaW1hdGUoaW5kZXhlc1swXSwgaW5kZXhlc1sxXSwgaW5kZXhlc1syXSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHRcdFxyXG5cdFx0ZGF0YSh1cmwpIHtcclxuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xyXG5cdFx0XHRcdGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuXHRcdFx0XHR4aHIub3BlbihcIkdFVFwiLCB1cmwsIHRydWUpO1xyXG5cdFx0XHRcdHhoci5yZXNwb25zZVR5cGUgPSBcImpzb25cIjtcclxuXHRcdFx0XHR4aHIuc2VuZCgpO1xyXG5cdFx0XHRcdHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdGlmKHhoci5yZWFkeVN0YXRlICE9PSA0KSByZXR1cm47XHJcblx0XHRcdFx0XHRpZih4aHIuc3RhdHVzICE9PSAyMDApIHtcclxuXHRcdFx0XHRcdFx0cmVqZWN0KHhoci5zdGF0dXMpO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0cmVzb2x2ZSh4aHIucmVzcG9uc2UpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH07XHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHJcblx0XHRhZGRUZXh0QmxvY2soaW5kZXgpIHtcclxuXHRcdFx0dGhpcy5oZWFkZXIuaW5uZXJUZXh0ID0gdGhpcy53b3Jrc1tpbmRleF0udGl0bGU7XHJcblx0XHRcdHRoaXMuZGVzY3JpcHRpb24uaW5uZXJUZXh0ID0gdGhpcy53b3Jrc1tpbmRleF0uZGVzYztcclxuXHRcdFx0dGhpcy5zaXRlTGluay5ocmVmID0gdGhpcy53b3Jrc1tpbmRleF0ubGluaztcclxuXHRcdH0sXHJcblxyXG5cdFx0YWRkRGlzcGxheShpbmRleCkge1xyXG5cdFx0XHR0aGlzLmRpc3BsYXkuc3JjID0gdGhpcy53b3Jrc1tpbmRleF0uaW1hZ2U7XHJcblx0XHRcdHRoaXMuZGlzcGxheS5hbHQgPSB0aGlzLndvcmtzW2luZGV4XS50aXRsZTtcclxuXHRcdFx0dGhpcy5kaXNwbGF5LmRhdGFzZXQuaW5kZXggPSBpbmRleDtcclxuXHRcdH0sXHJcblxyXG5cdFx0YWRkTmV4dEltZyhpbmRleCkge1xyXG5cdFx0XHR0aGlzLmJ0bk5leHRJbWcuc3JjID0gdGhpcy53b3Jrc1tpbmRleF0ucHJldmlldztcclxuXHRcdFx0dGhpcy5idG5OZXh0SW1nLmFsdCA9IHRoaXMud29ya3NbaW5kZXhdLnRpdGxlO1xyXG5cdFx0XHR0aGlzLmJ0bk5leHRJbWcuZGF0YXNldC5pbmRleCA9IGluZGV4O1xyXG5cdFx0fSxcclxuXHJcblx0XHRhZGRQcmV3SW1nKGluZGV4KSB7XHJcblx0XHRcdHRoaXMuYnRuUHJld0ltZy5zcmMgPSB0aGlzLndvcmtzW2luZGV4XS5wcmV2aWV3O1xyXG5cdFx0XHR0aGlzLmJ0blByZXdJbWcuYWx0ID0gdGhpcy53b3Jrc1tpbmRleF0udGl0bGU7XHJcblx0XHRcdHRoaXMuYnRuUHJld0ltZy5kYXRhc2V0LmluZGV4ID0gaW5kZXg7XHJcblx0XHR9LFxyXG5cclxuXHRcdGNsaWNraW5nKGRpc3BsYXlJbmRleCwgcHJld0luZGV4LCBuZXh0SW5kZXgpIHtcclxuXHRcdFx0Ly9tYWluIGNvbnRlbnQgaW4gdGhlIHNsaWRlcjogYmlnIHBpY3R1cmUsIHRpdGxlLCBkZXNjcmlwdGlvbiBhbmQgbGlua1xyXG5cdFx0XHR0aGlzLmFkZERpc3BsYXkoZGlzcGxheUluZGV4KTtcclxuXHRcdFx0dGhpcy5hZGRUZXh0QmxvY2soZGlzcGxheUluZGV4KTtcclxuXHRcdFx0Ly9zbWFsbCBpbWFnZSBvbiB0aGUgYnV0dG9uIFwicHJldmlvdXMgd29ya1wiXHJcblx0XHRcdHRoaXMuYWRkUHJld0ltZyhwcmV3SW5kZXgpO1xyXG5cdFx0XHQvL3NtYWxsIGltYWdlIG9uIHRoZSBidXR0b24gXCJuZXh0IHdvcmtcIlxyXG5cdFx0XHR0aGlzLmFkZE5leHRJbWcobmV4dEluZGV4KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0dG9nZ2xlSW5kZXhlcyhhcnIsIHR5cGUpIHtcclxuXHRcdFx0bGV0IG1heCA9IHRoaXMud29ya3MubGVuZ3RoIC0gMTtcclxuXHJcblx0XHRcdGZvcihsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRzd2l0Y2godHlwZSkge1xyXG5cdFx0XHRcdFx0Y2FzZSBcInBsdXNcIiA6XHJcblx0XHRcdFx0XHRcdGlmKGFycltpXSA9PSBtYXgpIGFycltpXSA9IDA7XHJcblx0XHRcdFx0XHRcdGVsc2UgYXJyW2ldKys7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0Y2FzZSBcIm1pbnVzXCIgOlxyXG5cdFx0XHRcdFx0XHRpZihhcnJbaV0gPT0gMCkgYXJyW2ldID0gbWF4O1xyXG5cdFx0XHRcdFx0XHRlbHNlIGFycltpXS0tO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRcclxuXHRcdGFuaW1hdGUob3B0aW9ucykge1xyXG5cdFx0XHRsZXQgc3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuXHJcblx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiBhbmltYXRlKHRpbWUpIHtcclxuXHRcdFx0XHQvLyB0aW1lRnJhY3Rpb24g0L7RgiAwINC00L4gMVxyXG5cdFx0XHRcdGxldCB0aW1lRnJhY3Rpb24gPSAodGltZSAtIHN0YXJ0KSAvIG9wdGlvbnMuZHVyYXRpb247XHJcblx0XHRcdFx0aWYgKHRpbWVGcmFjdGlvbiA+IDEpIHRpbWVGcmFjdGlvbiA9IDE7XHJcblxyXG5cdFx0XHRcdC8vINGC0LXQutGD0YnQtdC1INGB0L7RgdGC0L7Rj9C90LjQtSDQsNC90LjQvNCw0YbQuNC4XHJcblx0XHRcdFx0bGV0IHByb2dyZXNzID0gdGltZUZyYWN0aW9uO1xyXG5cdFx0XHRcdC8v0YTRg9C90LrRhtC40Y8sINC+0L/QuNGB0YvQstCw0Y7RidCw0Y8g0LDQvdC40LzQsNGG0LjRjlxyXG5cdFx0XHRcdG9wdGlvbnMuZHJhdyhwcm9ncmVzcyk7XHJcblxyXG5cdFx0XHRcdGlmICh0aW1lRnJhY3Rpb24gPCAxKSB7XHJcblx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0YWRkQW5pbWF0ZShpLCBqLCBrKSB7XHJcblx0XHRcdC8v0LDQvdC40LzQsNGG0LjRjyDQtNC+INC/0LXRgNC10LrQu9GO0YfQtdC90LjRjyDRgdC70LDQudC00LBcclxuXHRcdFx0U2xpZGVyLmFuaW1hdGUoe1xyXG5cdFx0XHRcdGR1cmF0aW9uOiBTbGlkZXIuZHVyYXRpb24sXHJcblx0XHRcdFx0ZHJhdzogZnVuY3Rpb24gKHByb2dyZXNzKSB7XHJcblx0XHRcdFx0XHRTbGlkZXIuYnRuUHJld0ltZy5zdHlsZS5tYXJnaW5Ub3AgPSBwcm9ncmVzcyAqIDYwMCArIFwicHhcIjtcclxuXHRcdFx0XHRcdFNsaWRlci5idG5OZXh0SW1nLnN0eWxlLm1hcmdpblRvcCA9IHByb2dyZXNzICogLTYwMCArIFwicHhcIjtcclxuXHRcdFx0XHRcdFNsaWRlci5kaXNwbGF5LnN0eWxlLm9wYWNpdHkgPSAxIC0gcHJvZ3Jlc3M7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdFNsaWRlci5jbGlja2luZyhpLCBqLCBrKTtcclxuXHJcblx0XHRcdFx0U2xpZGVyLmJ0blByZXdJbWcuc3R5bGUubWFyZ2luVG9wID0gMCArIFwicHhcIjtcclxuXHRcdFx0XHRTbGlkZXIuYnRuUHJld0ltZy5zdHlsZS5oZWlnaHQgPSAwICsgXCIlXCI7XHJcblx0XHRcdFx0U2xpZGVyLmJ0bk5leHRJbWcuc3R5bGUubWFyZ2luVG9wID0gMCArIFwicHhcIjtcclxuXHRcdFx0XHRTbGlkZXIuYnRuTmV4dEltZy5zdHlsZS5oZWlnaHQgPSAwICsgXCIlXCI7XHJcblxyXG5cdFx0XHRcdC8v0LDQvdC40LzQsNGG0LjRjyDQv9C+0YHQu9C1INC/0LXRgNC10LrQu9GO0YfQtdC90LjRjyDRgdC70LDQudC00LBcclxuXHRcdFx0XHRTbGlkZXIuYW5pbWF0ZSh7XHJcblx0XHRcdFx0XHRkdXJhdGlvbjogU2xpZGVyLmR1cmF0aW9uLFxyXG5cdFx0XHRcdFx0ZHJhdzogZnVuY3Rpb24gKHByb2dyZXNzKSB7XHJcblx0XHRcdFx0XHRcdFNsaWRlci5idG5QcmV3SW1nLnN0eWxlLmhlaWdodCA9IHByb2dyZXNzICogMTAwICsgXCIlXCI7XHJcblx0XHRcdFx0XHRcdFNsaWRlci5idG5OZXh0SW1nLnN0eWxlLmhlaWdodCA9IHByb2dyZXNzICogMTAwICsgXCIlXCI7XHJcblx0XHRcdFx0XHRcdFNsaWRlci5kaXNwbGF5LnN0eWxlLm9wYWNpdHkgPSBwcm9ncmVzcztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSwgKFNsaWRlci5kdXJhdGlvbiArIDEwMCkpO1xyXG5cdFx0fVxyXG5cdH1cclxufSk7XHJcbiJdfQ==
